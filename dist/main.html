<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <!-- Google sign in -->
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="187688865576-1m1j5gjse0a50tp740puji1jrt3e5m1f.apps.googleusercontent.com">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    
    <!-- Google charts -->
    <script src="https://www.gstatic.com/charts/loader.js"></script>
  </head>
  <body>
  	<section id="index">
  		<!-- bundled js and css will get inlined here -->
    </section>
    <script>
      const warningBarElements = document.getElementsByClassName('warning-bar-content');
      for (let i = 0; i < warningBarElements.length; i++) {
        const el = warningBarElements[i];;
        el.hidden = true;
      }
    </script>
  <script type="text/javascript" src="https://unpkg.com/react@16.13.0/umd/react.production.min.js"></script><script type="text/javascript" src="https://unpkg.com/react-dom@16.13.0/umd/react-dom.production.min.js"></script><script type="text/javascript" src="https://unpkg.com/prop-types@15.7.2/prop-types.min.js"></script><script type="text/javascript" src="https://unpkg.com/axios@0.19.2/dist/axios.min.js"></script><script type="text/javascript">!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t){e.exports=React},function(e,t){e.exports=PropTypes},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=axios},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),l=(n=o)&&n.__esModule?n:{default:n},s=r(1);var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.scriptLoaderId="id"+r.constructor.idCount++,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onError,r=e.onLoad,n=e.url;this.constructor.loadedScripts[n]?r():this.constructor.erroredScripts[n]?t():this.constructor.scriptObservers[n]?this.constructor.scriptObservers[n][this.scriptLoaderId]=this.props:(this.constructor.scriptObservers[n]=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},this.scriptLoaderId,this.props),this.createScript())}},{key:"componentWillUnmount",value:function(){var e=this.props.url,t=this.constructor.scriptObservers[e];t&&delete t[this.scriptLoaderId]}},{key:"createScript",value:function(){var e=this,t=this.props,r=t.onCreate,n=t.url,a=t.attributes,o=document.createElement("script");r(),a&&Object.keys(a).forEach((function(e){return o.setAttribute(e,a[e])})),o.src=n,o.hasAttribute("async")||(o.async=1);var l=function(t){var r=e.constructor.scriptObservers[n];Object.keys(r).forEach((function(a){t(r[a])&&delete e.constructor.scriptObservers[n][e.scriptLoaderId]}))};o.onload=function(){e.constructor.loadedScripts[n]=!0,l((function(e){return e.onLoad(),!0}))},o.onerror=function(){e.constructor.erroredScripts[n]=!0,l((function(e){return e.onError(),!0}))},document.body.appendChild(o)}},{key:"render",value:function(){return null}}]),t}(l.default.Component);i.propTypes={attributes:s.PropTypes.object,onCreate:s.PropTypes.func,onError:s.PropTypes.func.isRequired,onLoad:s.PropTypes.func.isRequired,url:s.PropTypes.string.isRequired},i.defaultProps={attributes:{},onCreate:function(){},onError:function(){},onLoad:function(){}},i.scriptObservers={},i.loadedScripts={},i.erroredScripts={},i.idCount=0,t.default=i,e.exports=t.default},function(e,t,r){var n=r(6),a=r(7);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},l=(n(a,o),a.locals?a.locals:{});e.exports=l},function(e,t,r){"use strict";var n,a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),l=[];function s(e){for(var t=-1,r=0;r<l.length;r++)if(l[r].identifier===e){t=r;break}return t}function i(e,t){for(var r={},n=[],a=0;a<e.length;a++){var o=e[a],i=t.base?o[0]+t.base:o[0],c=r[i]||0,u="".concat(i," ").concat(c);r[i]=c+1;var p=s(u),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==p?(l[p].references++,l[p].updater(d)):l.push({identifier:u,updater:f(d,t),references:1}),n.push(u)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=r.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var l=o(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var u,p=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,r,n){var a=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=p(t,a);else{var o=document.createTextNode(a),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(o,l[t]):e.appendChild(o)}}function h(e,t,r){var n=r.css,a=r.media,o=r.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var g=null,m=0;function f(e,t){var r,n,a;if(t.singleton){var o=m++;r=g||(g=c(t)),n=d.bind(null,r,o,!1),a=d.bind(null,r,o,!0)}else r=c(t),n=h.bind(null,r,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var r=i(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var a=s(r[n]);l[a].references--}for(var o=i(e,t),c=0;c<r.length;c++){var u=s(r[c]);0===l[u].references&&(l[u].updater(),l.splice(u,1))}r=o}}}},function(e,t,r){(t=r(8)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Poppins:wght@200;300&family=Roboto:ital,wght@0,400;1,300&display=swap);"]),t.push([e.i,":root {\r\n\t--grey: #252827;\r\n\t--green:#39ff94;\r\n\t--light-grey:#d9d9d9;\r\n\t--transparent: rgba(255,255,255,0);\r\n}\r\n\r\nh1,h2,h3,h4,h5,h6 {\r\n\tfont-family: 'Roboto';\r\n}\r\n\r\n\r\n.logo-image {\r\n\theight:4em;\r\n}\r\n\r\nspan, p {\r\n\tfont-family: 'Poppins';\r\n\tline-height: 1.2em;\r\n}\r\n\r\n.warning-bar-content{\r\n\tdisplay: none;\r\n}\r\n.pointer {\r\n\tcursor: pointer;\r\n}\r\n.absolute {\r\n\tposition: absolute;\r\n}\r\n.dark-grey {\r\n\tbackground-color: var(--grey);\r\n}\r\n.green {\r\n\tbackground-color: var(--green);\r\n}\r\n.light-grey {\r\n\tbackground-color: var(--light-grey);\r\n}\r\n.light-grey-text {\r\n\tcolor: var(--light-grey) !important;\r\n}\r\n.white {\r\n\tbackground-color: white;\r\n}\r\n.transparent {\r\n\tbackground-color: var(--transparent);\r\n}\r\n.flex-center-wrapper {\r\n\tdisplay: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.full-page {\r\n\theight: 100%;\r\n\twidth: 100%;\r\n}\r\n\r\n.header{\r\n\tfont-size: 1.2em;\r\n\tfont-weight: bold;\r\n}\r\n.highlight-on-hover:hover{\r\n\tcolor: var(--green);\r\n}\r\n.sub-text {\r\n\tfont-size: 0.9em;\r\n\tfont-family: Roboto\t;\r\n}\r\n.table-cell:hover {\r\n\tcolor: var(--green);\r\n}\r\n.side-padding{\r\n\tpadding: 0em 0.5em;\r\n}\r\n.tabs{\r\n\tdisplay: flex;\r\n}\r\n.tabs .tab {\r\n\t-webkit-box-flex: 1;\r\n\tflex-grow: 1;\r\n\tcolor:#000;\r\n\ttext-align: center;\r\n}\r\n.tab:hover {\r\n\tbackground-color: var(--grey);\r\n\tcolor: var(--green);\r\n}\r\n\r\n.margin-top {\r\n\tmargin-top:4em;\r\n}\r\n\r\n.spinner-green, .spinner-green-only{\r\n\tborder-color: var(--green);\r\n}\r\n",""]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(l=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(l)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(i," */")),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(o).concat([a]).join("\n")}var l,s,i;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var s=0;s<e.length;s++){var i=[].concat(e[s]);n&&a[i[0]]||(r&&(i[2]?i[2]="".concat(r," and ").concat(i[2]):i[2]=r),t.push(i))}},t}},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(2),l=r.n(o);var s=({selectPage:e,page:t})=>a.a.createElement("div",{className:"navbar-fixed"},a.a.createElement("nav",null,a.a.createElement("div",{className:"nav-wrapper dark-grey text-center"},a.a.createElement("div",{"data-target":"mobile-demo",class:"sidenav-trigger"},a.a.createElement("i",{class:"material-icons"},"menu")),a.a.createElement("img",{className:"logo-image",src:"https://i.imgur.com/XX2azL5.png"}),a.a.createElement("ul",{class:"right hide-on-med-and-down light-grey-text"},a.a.createElement("li",{className:"pointer side-padding highlight-on-hover",onClick:t=>e(t.target.innerText)},"Dashboard"),a.a.createElement("li",{className:"pointer side-padding highlight-on-hover",onClick:t=>e(t.target.innerText)},"Forms"),a.a.createElement("li",{className:"pointer side-padding highlight-on-hover",onClick:t=>e(t.target.innerText)},"Workouts"),a.a.createElement("li",{className:"pointer side-padding highlight-on-hover",onClick:t=>e(t.target.innerText)},"Videos")))),a.a.createElement("ul",{class:"sidenav",id:"mobile-demo"},a.a.createElement("li",{className:"pointer",onClick:t=>e(t.target.innerText)},"Dashboard"),a.a.createElement("li",{className:"pointer",onClick:t=>e(t.target.innerText)},"Forms"),a.a.createElement("li",{className:"pointer",onClick:t=>e(t.target.innerText)},"Workouts"),a.a.createElement("li",{className:"pointer",onClick:t=>e(t.target.innerText)},"Videos")));var i=({selectForm:e})=>a.a.createElement("div",null,a.a.createElement("div",{class:"nav-content dark-grey light-grey-text"},a.a.createElement("ul",{class:"tabs tabs-transparent"},(t=>{console.log(t);const r=Object.keys(t).map((r,n)=>a.a.createElement("li",{className:"tab pointer light-grey-text",key:`formOption-${n}`,onClick:n=>e(t[r])},r));return r.length?r:null})({"Initial Signup":"initial","AM Checklist":"am_checklist","PM Checklist":"pm_checklist","Add meal":"meals"}))));const c={},u=new Set(["withFailureHandler","withLogger","withSuccessHandler","withUserObject"]);Object.keys(google.script.run).filter(e=>!u.has(e)).forEach(e=>{c[e]=(...t)=>new Promise((r,n)=>{google.script.run.withSuccessHandler(r).withFailureHandler(n)[e](...t)})});var p=c,d=r(1);const h=({setCurrentUser:e})=>{const[t,r]=Object(n.useState)(""),[o,l]=Object(n.useState)([]);return a.a.createElement("div",{className:"full-page absolute dark-grey flex-center-wrapper"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{class:"row"},a.a.createElement("form",{class:"col s12"},a.a.createElement("div",{class:"row"},a.a.createElement("div",{class:"input-field col s6"},a.a.createElement("input",{placeholder:"Enter your email address to begin",id:"first_name",type:"email",class:"validate",onChange:e=>r(e.target.value)}),a.a.createElement("button",{type:"submit",className:"btn",onClick:r=>{r.preventDefault();const n=e(t);"success"!==n&&l(n)}},"Enter"),a.a.createElement("div",null,o.toString()),a.a.createElement("div",null,t)))))))};var g=h;h.propTypes={setCurrentUser:r.n(d).a.func};const m={initial:{url:"https://docs.google.com/forms/d/e/1FAIpQLSdCi045uQG2DkyJQHLe35aLPbakmnfpB_yg66r5Meu5gNNLoA/viewform",emailField:"entry.1228230992"},am_checklist:{url:"https://docs.google.com/forms/d/e/1FAIpQLSfvABBApN4S3Rxm-yzcgKvXK1jZYXiH3dsA75NRSMHK_VmOZA/viewform",emailField:"entry.334173060"},pm_checklist:{url:"https://docs.google.com/forms/d/e/1FAIpQLSf9tC5DjPlhD3f27iUqQjTprJbx6ce29WY23w-drVWCm3mI9w/viewform",emailField:"entry.334173060"}};var f=e=>(e=>{const{formName:t}=e,r=m[t],n={emailField:r.emailField,email:e.email},o=((e,t)=>{const r={embedded:!0,usp:"pp_url",[t.emailField]:t.email},n=[];for(let e in r)n.push(`${e}=${r[e]}`);return`${e}${n.length?`?${n.join("&")}`:""}`})(r.url,n);return a.a.createElement("iframe",{src:o,width:"640",height:"2000",frameborder:"0",marginheight:"0",marginwidth:"0"},"Loading…")})(e),v=r(3),b=r.n(v);class y{constructor(){this.key="JXVmmb0Zswgjl8Sar9qyesFkatcKHX1OI6TWdGJo",this.baseUrl="https://api.nal.usda.gov/fdc/v1"}search(e,t){const{key:r,baseUrl:n}=this,a=n+"/foods/search";b.a.get(a,{params:{api_key:r,query:e,pageSize:8}}).then(e=>{console.log(e.data),t(e.data)}).catch(e=>t({error:e}))}}var C=()=>a.a.createElement("div",{className:"full-page absolute dark-grey flex-center-wrapper"},a.a.createElement("div",{class:"preloader-wrapper big active "},a.a.createElement("div",{class:"spinner-layer spinner-green-only"},a.a.createElement("div",{class:"circle-clipper left"},a.a.createElement("div",{class:"circle"})),a.a.createElement("div",{class:"gap-patch"},a.a.createElement("div",{class:"circle"})),a.a.createElement("div",{class:"circle-clipper right"},a.a.createElement("div",{class:"circle"})))));const E=({foodData:e,addToTotal:t})=>{const[r,o]=Object(n.useState)(!1),{description:l,foodNutrients:s,brandOwner:i}=e,c=(e=>{const t={};return e.forEach(e=>{switch(e.nutrientName){case"Protein":t.protein=e.value;break;case"Total lipid (fat)":t.fat=e.value;break;case"Carbohydrate, by difference":t.carbs=e.value;break;case"Energy":t.calories=e.value}}),t})(s),u=e=>{e.preventDefault(),t(c)};return a.a.createElement("tr",null,a.a.createElement("td",{className:"pointer table-cell",onClick:()=>{console.log(l,r,c),o(!r)}},a.a.createElement("span",{className:"header"},l," "),a.a.createElement("div",null,a.a.createElement("span",null,i)),r?(()=>{const e=c;return a.a.createElement("div",null,a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col s6 m3"},a.a.createElement("span",{className:"sub-text"},"Calories: ",e.calories)),a.a.createElement("div",{className:"col s6 m3 "},a.a.createElement("span",{className:"sub-text"},"Carbs: ",e.carbs)),a.a.createElement("div",{className:"col s6 m3 "},a.a.createElement("span",{className:"sub-text"},"Fat: ",e.fat)),a.a.createElement("div",{className:"col s6 m3 "},a.a.createElement("span",{className:"sub-text"},"Protein: ",e.carbs))),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col s12 m8"},a.a.createElement("span",{className:"grey-text"},"Calculated from value per serving size measure")),a.a.createElement("div",{className:"col s12 m4"},a.a.createElement("button",{className:"btn",onClick:u},"Add"))))})():null))},w=p.getSheetsData("meals");var O=({user:e})=>{const[t,r]=Object(n.useState)(!1),[o,l]=Object(n.useState)(),[s,i]=Object(n.useState)(""),[c,u]=Object(n.useState)({}),[d,h]=Object(n.useState)(0),[g,m]=Object(n.useState)(0),[f,v]=Object(n.useState)(0),[b,O]=Object(n.useState)({});console.log(w),w.then(e=>{O(e),r(!0),console.log("getMealSheet callback",b)}).catch(e=>console.log(e));const S=new y,D=e=>{console.log("addToTotal",e),e.carbs&&m(e.carbs+g),e.fat&&v(e.fat+f),e.protein&&h(e.protein+d),console.log("updatedMeal",g,d,f)},k=t=>{t.preventDefault(),console.log("send",g,d,f);const r=[(new Date).toISOString(),e.email,d,f,g,N()];b.values.push(r),console.log("about to updateAllValues",b);const n=p.updateAllValues(b);console.log(n),n.then(e=>{console.log(e)}).catch(e=>console.log(e))},N=()=>9*f+4*g+4*d;return t?a.a.createElement("div",{className:"light-grey-text"},a.a.createElement("div",{className:"row"},a.a.createElement("form",{className:"col s6 m4"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col s12"},a.a.createElement("input",{className:"light-grey-text",type:"text",id:"protein",placeholder:"input grams",onChange:e=>h(e.target.value),value:d}),a.a.createElement("label",{for:"protein"},"Protein")),a.a.createElement("div",{className:"col s12"},a.a.createElement("input",{className:"light-grey-text",type:"text",id:"carbs",placeholder:"input grams",onChange:e=>m(e.target.value),value:g}),a.a.createElement("label",{for:"carbs"},"Carbohydrates")),a.a.createElement("div",{className:"col s12"},a.a.createElement("input",{className:"light-grey-text",type:"text",id:"fats",placeholder:"input grams",onChange:e=>v(e.target.value),value:f}),a.a.createElement("label",{for:"fats"},"Fats")),a.a.createElement("div",{className:"col s12"},a.a.createElement("input",{className:"light-grey-text",disabled:!0,type:"text",id:"total",placeholder:"",value:N()}),a.a.createElement("label",{for:"total"},"Total Calories"))),a.a.createElement("div",{className:"row"},a.a.createElement("button",{type:"submit",className:"btn",onClick:k},"send"))),a.a.createElement("form",{className:"col s6 m8"},a.a.createElement("div",{class:"row"},a.a.createElement("div",{class:"input-field col s12"},a.a.createElement("input",{className:"light-grey-text",placeholder:"What did you eat?",id:"food",type:"text",class:"validate",onChange:e=>{i(e.target.value),s?S.search(s,e=>{console.log(e),e.error?l(e.error):u(e)}):u({})}}),a.a.createElement("table",null,(()=>{if(c.foods)return c.foods.map((e,t)=>a.a.createElement(E,{key:`$food-bar-${t}`,addToTotal:D,foodData:e}))})()))))),a.a.createElement("div",null,o)):a.a.createElement(C,null)};var S=({selectedForm:e,currentUser:t,mealSheet:r})=>a.a.createElement("div",{className:"dark-grey"},e?"meals"===e?a.a.createElement(O,{mealSheet:r,user:t}):a.a.createElement("div",{className:"container margin-top"},a.a.createElement(f,{formName:e,email:t.email})):null),D=r(4),k=r.n(D),N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function T(e,t){function r(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var x=function(){return(x=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function j(e,t,r,n){return new(r||(r=Promise))((function(a,o){function l(e){try{i(n.next(e))}catch(e){o(e)}}function s(e){try{i(n.throw(e))}catch(e){o(e)}}function i(e){e.done?a(e.value):new r((function(t){t(e.value)})).then(l,s)}i((n=n.apply(e,t||[])).next())}))}function P(e,t){var r,n,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,n=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var A={graph_id:null,legend_toggle:!1,graphID:null,options:{colors:null},data:null,rows:null,columns:null,diffdata:null,chartEvents:null,legendToggle:!1,chartActions:null,getChartWrapper:function(e,t){},getChartEditor:null,className:"",style:{},formatters:null,spreadSheetUrl:null,spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{},controls:null,render:null,toolbarItems:null,toolbarID:null},_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleGoogleChartsLoaderScriptLoaded=function(e){var r=t.props,n=r.chartVersion,a=r.chartPackages,o=r.chartLanguage,l=r.mapsApiKey,s=r.onLoad;e.charts.load(n||"current",{packages:a||["corechart","controls"],language:o||"en",mapsApiKey:l}),e.charts.setOnLoadCallback((function(){s(e)}))},t}return T(t,e),t.prototype.shouldComponentUpdate=function(e){return e.chartPackages===this.props.chartPackages},t.prototype.render=function(){var e=this,t=this.props.onError;return Object(n.createElement)(k.a,{url:"https://www.gstatic.com/charts/loader.js",onError:t,onLoad:function(){var t=window;t.google&&e.handleGoogleChartsLoaderScriptLoaded(t.google)}})},t}(n.Component),L=0,F=function(){return"reactgooglegraph-"+(L+=1)},I=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],W=function(e,t,r){return void 0===r&&(r={}),j(void 0,void 0,void 0,(function(){return P(this,(function(n){return[2,new Promise((function(n,a){var o=r.headers?"headers="+r.headers:"headers=0",l=r.query?"&tq="+encodeURIComponent(r.query):"",s=r.gid?"&gid="+r.gid:"",i=r.sheet?"&sheet="+r.sheet:"",c=r.access_token?"&access_token="+r.access_token:"",u=t+"/gviz/tq?"+(""+o+s+i+l+c);new e.visualization.Query(u).send((function(e){e.isError()?a("Error in query:  "+e.getMessage()+" "+e.getDetailedMessage()):n(e.getDataTable())}))}))]}))}))},z=Object(n.createContext)(A),M=z.Provider,U=z.Consumer,R=function(e){var t=e.children,r=e.value;return Object(n.createElement)(M,{value:r},t)},H=function(e){var t=e.render;return Object(n.createElement)(U,null,(function(e){return t(e)}))},B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hiddenColumns:[]},t.listenToLegendToggle=function(){var e=t.props,r=e.google,n=e.googleChartWrapper;r.visualization.events.addListener(n,"select",(function(){var e=n.getChart().getSelection(),r=n.getDataTable();if(0!==e.length&&null===e[0].row&&null!==r){var a=e[0].column,o=t.getColumnID(r,a);t.state.hiddenColumns.includes(o)?t.setState((function(e){return x({},e,{hiddenColumns:e.hiddenColumns.filter((function(e){return e!==o})).slice()})})):t.setState((function(e){return x({},e,{hiddenColumns:e.hiddenColumns.concat([o])})}))}}))},t.applyFormatters=function(e,r){for(var n=t.props.google,a=0,o=r;a<o.length;a++){var l=o[a];switch(l.type){case"ArrowFormat":(s=new n.visualization.ArrowFormat(l.options)).format(e,l.column);break;case"BarFormat":(s=new n.visualization.BarFormat(l.options)).format(e,l.column);break;case"ColorFormat":for(var s=new n.visualization.ColorFormat(l.options),i=0,c=l.ranges;i<c.length;i++){var u=c[i];s.addRange.apply(s,u)}s.format(e,l.column);break;case"DateFormat":(s=new n.visualization.DateFormat(l.options)).format(e,l.column);break;case"NumberFormat":(s=new n.visualization.NumberFormat(l.options)).format(e,l.column);break;case"PatternFormat":(s=new n.visualization.PatternFormat(l.options)).format(e,l.column)}}},t.getColumnID=function(e,t){return e.getColumnId(t)||e.getColumnLabel(t)},t.draw=function(e){var r=e.data,n=e.diffdata,a=e.rows,o=e.columns,l=e.options,s=e.legend_toggle,i=e.legendToggle,c=e.chartType,u=e.formatters,p=e.spreadSheetUrl,d=e.spreadSheetQueryParameters;return j(t,void 0,void 0,(function(){var e,t,h,g,m,f,v,b,y,C,E,w,O,S;return P(this,(function(D){switch(D.label){case 0:return e=this.props,t=e.google,h=e.googleChartWrapper,m=null,null!==n&&(f=t.visualization.arrayToDataTable(n.old),v=t.visualization.arrayToDataTable(n.new),m=t.visualization[c].prototype.computeDiff(f,v)),null===r?[3,1]:(g=Array.isArray(r)?t.visualization.arrayToDataTable(r):new t.visualization.DataTable(r),[3,5]);case 1:return null===a||null===o?[3,2]:(g=t.visualization.arrayToDataTable([o].concat(a)),[3,5]);case 2:return null===p?[3,4]:[4,W(t,p,d)];case 3:return g=D.sent(),[3,5];case 4:g=t.visualization.arrayToDataTable([]),D.label=5;case 5:for(b=g.getNumberOfColumns(),y=0;y<b;y+=1)C=this.getColumnID(g,y),this.state.hiddenColumns.includes(C)&&(E=g.getColumnLabel(y),w=g.getColumnId(y),O=g.getColumnType(y),g.removeColumn(y),g.addColumn({label:E,id:w,type:O}));return S=h.getChart(),"Timeline"===h.getChartType()&&S&&S.clearChart(),h.setChartType(c),h.setOptions(l),h.setDataTable(g),h.draw(),null!==this.props.googleChartDashboard&&this.props.googleChartDashboard.draw(g),null!==m&&(h.setDataTable(m),h.draw()),null!==u&&(this.applyFormatters(g,u),h.setDataTable(g),h.draw()),!0!==i&&!0!==s||this.grayOutHiddenColumns({options:l}),[2]}}))}))},t.grayOutHiddenColumns=function(e){var r=e.options,n=t.props.googleChartWrapper,a=n.getDataTable();if(null!==a){var o=a.getNumberOfColumns();if(!1!==t.state.hiddenColumns.length>0){var l=Array.from({length:o-1}).map((function(e,n){var o=t.getColumnID(a,n+1);return t.state.hiddenColumns.includes(o)?"#CCCCCC":void 0!==r.colors&&null!==r.colors?r.colors[n]:I[n]}));n.setOptions(x({},r,{colors:l})),n.draw()}}},t.onResize=function(){t.props.googleChartWrapper.draw()},t}return T(t,e),t.prototype.componentDidMount=function(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.google,r=e.googleChartWrapper;window.removeEventListener("resize",this.onResize),t.visualization.events.removeAllListeners(r),"Timeline"===r.getChartType()&&r.getChart()&&r.getChart().clearChart()},t.prototype.componentDidUpdate=function(){this.draw(this.props)},t.prototype.render=function(){return null},t}(n.Component),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.componentDidMount=function(){},t.prototype.componentWillUnmount=function(){},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this.props,t=e.google,r=e.googleChartWrapper,a=e.googleChartDashboard;return Object(n.createElement)(H,{render:function(e){return Object(n.createElement)(B,x({},e,{google:t,googleChartWrapper:r,googleChartDashboard:a}))}})},t}(n.Component),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.listenToEvents=function(e){var t=this,r=e.chartEvents,n=e.google,a=e.googleChartWrapper;if(null!==r){n.visualization.events.removeAllListeners(a);for(var o=function(e){var r=e.eventName,o=e.callback;n.visualization.events.addListener(a,r,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];o({chartWrapper:a,props:t.props,google:n,eventArgs:e})}))},l=0,s=r;l<s.length;l++){o(s[l])}}},t.prototype.render=function(){var e=this,t=this.props,r=t.google,a=t.googleChartWrapper;return Object(n.createElement)(H,{render:function(t){return e.listenToEvents({chartEvents:t.chartEvents||null,google:r,googleChartWrapper:a}),null}})},t}(n.Component),Q=0,$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},t.graphID=null,t.dashboard_ref=Object(n.createRef)(),t.toolbar_ref=Object(n.createRef)(),t.getGraphID=function(){var e,r=t.props,n=r.graphID,a=r.graph_id;return e=null===n&&null===a?null===t.graphID?F():t.graphID:null!==n&&null===a?n:null!==a&&null===n?a:n,t.graphID=e,t.graphID},t.getControlID=function(e,t){return Q+=1,void 0===e?"googlechart-control-"+t+"-"+Q:e},t.addControls=function(e,r){var n=t.props,a=n.google,o=n.controls,l=null===o?null:o.map((function(e,r){var n=e.controlID,o=e.controlType,l=e.options,s=e.controlWrapperParams,i=t.getControlID(n,r);return{controlProp:e,control:new a.visualization.ControlWrapper(x({containerId:i,controlType:o,options:l},s))}}));if(null===l)return null;r.bind(l.map((function(e){return e.control})),e);for(var s=function(r){for(var n=r.control,o=r.controlProp.controlEvents,l=function(r){var o=r.callback,l=r.eventName;a.visualization.events.removeListener(n,l,o),a.visualization.events.addListener(n,l,(function(){for(var r=[],l=0;l<arguments.length;l++)r[l]=arguments[l];o({chartWrapper:e,controlWrapper:n,props:t.props,google:a,eventArgs:r})}))},s=0,i=void 0===o?[]:o;s<i.length;s++){l(i[s])}},i=0,c=l;i<c.length;i++){s(c[i])}return l},t.renderChart=function(){var e=t.props,r=e.width,a=e.height,o=e.options,l=e.style,s=e.className,i=e.rootProps,c=e.google,u=x({height:a||o&&o.height,width:r||o&&o.width},l);return Object(n.createElement)("div",x({id:t.getGraphID(),style:u,className:s},i),t.state.isReady&&null!==t.state.googleChartWrapper?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(q,{googleChartWrapper:t.state.googleChartWrapper,google:c,googleChartDashboard:t.state.googleChartDashboard}),Object(n.createElement)(V,{googleChartWrapper:t.state.googleChartWrapper,google:c})):null)},t.renderControl=function(e){return void 0===e&&(e=function(e){e.control,e.controlProp;return!0}),t.state.isReady&&null!==t.state.googleChartControls?Object(n.createElement)(n.Fragment,null,t.state.googleChartControls.filter((function(t){var r=t.controlProp,n=t.control;return e({control:n,controlProp:r})})).map((function(e){var t=e.control;e.controlProp;return Object(n.createElement)("div",{key:t.getContainerId(),id:t.getContainerId()})}))):null},t.renderToolBar=function(){return null===t.props.toolbarItems?null:Object(n.createElement)("div",{ref:t.toolbar_ref})},t}return T(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.options,r=e.google,n=e.chartType,a=e.chartWrapperParams,o=e.toolbarItems,l=e.getChartEditor,s=e.getChartWrapper,i=x({chartType:n,options:t,containerId:this.getGraphID()},a),c=new r.visualization.ChartWrapper(i);c.setOptions(t),s(c,r);var u=new r.visualization.Dashboard(this.dashboard_ref),p=this.addControls(c,u);null!==o&&r.visualization.drawToolbar(this.toolbar_ref.current,o);var d=null;null!==l&&l({chartEditor:d=new r.visualization.ChartEditor,chartWrapper:c,google:r}),this.setState({googleChartEditor:d,googleChartControls:p,googleChartDashboard:u,googleChartWrapper:c,isReady:!0})},t.prototype.componentDidUpdate=function(){if(null!==this.state.googleChartWrapper&&null!==this.state.googleChartDashboard&&null!==this.state.googleChartControls)for(var e=this.props.controls,t=0;t<e.length;t+=1){var r=e[t],n=r.controlType,a=r.options,o=r.controlWrapperParams;o&&"state"in o&&this.state.googleChartControls[t].control.setState(o.state),this.state.googleChartControls[t].control.setOptions(a),this.state.googleChartControls[t].control.setControlType(n)}},t.prototype.shouldComponentUpdate=function(e,t){return this.state.isReady!==t.isReady||e.controls!==this.props.controls},t.prototype.render=function(){var e=this.props,t=e.width,r=e.height,a=e.options,o=e.style,l=x({height:r||a&&a.height,width:t||a&&a.width},o);return null!==this.props.render?Object(n.createElement)("div",{ref:this.dashboard_ref,style:l},Object(n.createElement)("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):Object(n.createElement)("div",{ref:this.dashboard_ref,style:l},this.renderControl((function(e){return"bottom"!==e.controlProp.controlPosition})),this.renderChart(),this.renderControl((function(e){return"bottom"===e.controlProp.controlPosition})),this.renderToolBar())},t}(n.Component),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isMounted=!1,t.state={loadingStatus:"loading",google:null},t.onLoad=function(e){if(t.isFullyLoaded(e))t.onSuccess(e);else var r=setInterval((function(){var e=window.google;t._isMounted?e&&t.isFullyLoaded(e)&&(clearInterval(r),t.onSuccess(e)):clearInterval(r)}),1e3)},t.onSuccess=function(e){t.setState({loadingStatus:"ready",google:e})},t.onError=function(){t.setState({loadingStatus:"errored"})},t}return T(t,e),t.prototype.render=function(){var e=this.props,t=e.chartLanguage,r=e.chartPackages,a=e.chartVersion,o=e.mapsApiKey,l=e.loader,s=e.errorElement;return Object(n.createElement)(R,{value:this.props},"ready"===this.state.loadingStatus&&null!==this.state.google?Object(n.createElement)($,x({},this.props,{google:this.state.google})):"errored"===this.state.loadingStatus&&s?s:l,Object(n.createElement)(_,x({},{chartLanguage:t,chartPackages:r,chartVersion:a,mapsApiKey:o},{onLoad:this.onLoad,onError:this.onError})))},t.prototype.componentDidMount=function(){this._isMounted=!0},t.prototype.componentWillUnmount=function(){this._isMounted=!1},t.prototype.isFullyLoaded=function(e){var t=this.props,r=t.controls,n=t.toolbarItems,a=t.getChartEditor;return e&&e.visualization&&e.visualization.ChartWrapper&&e.visualization.Dashboard&&(!r||e.visualization.ChartWrapper)&&(!a||e.visualization.ChartEditor)&&(!n||e.visualization.drawToolbar)},t.defaultProps=A,t}(n.Component);var K=({data:e,options:t})=>a.a.createElement(G,{chartType:"LineChart",loader:a.a.createElement("div",null,"Loading Chart"),data:e,options:t,width:"100%",height:"200px",legendToggle:!0});const J="#252827",X=p.getSheetsData("macrochart");var Z=({user:e})=>{const[t,r]=Object(n.useState)({}),[o,l]=Object(n.useState)(!1);Object(n.useEffect)(()=>{t!=={}&&X.then(e=>{console.log("gotChartData",e),e!=={}&&(r(e),l(!0))}).catch(e=>console.log(e))});return o?a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row text-center light-grey-text"},a.a.createElement("div",{className:"col"},a.a.createElement("h3",{className:""},"DASHBOARD"),a.a.createElement("span",{className:""},e.email))),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col"},(()=>{if(!t||t==={})return null;console.log("getWaterData",t);const{values:e,rowHeaders:r}=t,n=r,o=e.map(e=>[new Date(e[n.Date]),e[n["Water (oz)"]]]),l={title:"Water intake",hAxis:{title:"Date"},vAxis:{title:"Water (oz)"},legend:"none",backgroundColor:J,chartArea:{backgroundColor:J},colors:["#39ff94"]};return console.log(o),a.a.createElement(K,{data:o,options:l})})()),a.a.createElement("div",{className:"col"},(()=>{if(!t||t==={})return null;console.log("getWaterData",t);const{values:e,rowHeaders:r}=t,n=r,o=e.map(e=>[new Date(e[n.Date]),e[n["Fast window (hrs)"]]]),l={title:"Fasting",hAxis:{title:"Date"},vAxis:{title:"Hours"},legend:"none",backgroundColor:J,chartArea:{backgroundColor:J},colors:["red"]};return console.log(o),a.a.createElement(K,{data:o,options:l})})())),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col"},(()=>{if(!t||t==={})return null;console.log("getSleepData",t);const{values:e,rowHeaders:r}=t,n=r,o=e.map(e=>[new Date(e[n.Date]),e[n["Sleep time (hrs)"]]]),l={title:"Sleep",hAxis:{title:"Date"},vAxis:{title:"Hours"},legend:"none",backgroundColor:J,chartArea:{backgroundColor:J},colors:["blue"]};return console.log(o),a.a.createElement(K,{data:o,options:l})})()))):a.a.createElement(C,null)};function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ee extends a.a.Component{constructor(e){super(e),Y(this,"componentDidMount",()=>{p.getActiveUserEmail().then(e=>{console.log(e)});const e=p.getSheetsData("users");console.log(e),e.then(e=>{this.setState({userSheet:e,ready:!0}),console.log(this.state)}).catch(e=>console.log(e))}),Y(this,"changePage",e=>{console.log("changePage",e),this.setState({page:e.toLowerCase()})}),Y(this,"selectForm",e=>{this.setState({selectedForm:e})}),Y(this,"setCurrentUser",e=>{const t=e.toLowerCase().trim(),{userSheet:r}=this.state,n=r.rowHeaders;for(let e=1;e<r.values.length;e++){if(r.values[e][n.email]===t){const e={email:t};return this.setState({currentUser:e}),"success"}}return`${t} not found in our records.`}),this.state={page:"dashboard",currentUser:{},userSheet:{},options:[],selectForm:"",ready:!1}}render(){const{currentUser:e,ready:t,page:r,selectedForm:n,sheetData:o}=this.state;return a.a.createElement("div",{className:"App full-page dark-grey"},a.a.createElement(s,{selectPage:this.changePage}),t?null:a.a.createElement(C,null),t&&"forms"===r?a.a.createElement("div",null,a.a.createElement(i,{selectForm:this.selectForm}),a.a.createElement(S,{currentUser:e,selectedForm:n})):e.email?null:a.a.createElement(g,{setCurrentUser:this.setCurrentUser}),t&&e.email&&"dashboard"===r?a.a.createElement(Z,{user:e}):null)}}var te=ee;r(5);l.a.render(a.a.createElement(te,null),document.getElementById("index"))}]);</script></body>
</html>